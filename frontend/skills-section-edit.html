<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Skills-Section-Edit</title>
	<style>
		body {
			background-color: hsla(220, 90%, 80%, 1);
		}

		#skills-edit-container {
			max-width: 500px;
			height: auto;
			border:1px solid black;
			margin: auto;
			padding: 10px;
			background-color: hsl(153, 50%, 40%, 0.5);
		}

		#redirect-container {
             width: 100%;
             height: 2px;
             border: 1px solid black;
		}

        #redirect-arrow-icon {
            width: 30px;
            height: 30px;
            cursor: pointer;
        }

		#input-container {
            max-width: 100%;
            height: 150px;
            border: 1px solid black;
            padding: 10px;
		}

        .label {
          font-size: 2rem;
          color: white;
          font-weight: bolder;
        }

        #edit-skills {
           width: 93%;
           height: 30px;
           font-size: 1.5rem;
        }

        #save-btn {
         font-size: 1.8rem;
         cursor: pointer;
        }

        #del-btn {
         font-size: 1.8rem;
         cursor: pointer;
        }

        #redirect-span {
            cursor: pointer;
        }
	</style>
</head>
<body>
    <div id="skills-edit-container">
    	<div id="redirectContainer">
            <img id="redirect-arrow-icon" src="https://cdn-icons-png.freepik.com/256/4421/4421793.png?ga=GA1.1.1863119960.1721487512&semt=ais_hybrid" id="redirect-span">
        </div>
    	<div id="input-container">
    		<label class="label" for="edit-skills">Skills</label>
    		<input type="text" name="skills-edit-input" id="edit-skills" placeholder="Update your Skills" />
    	</div>
    	<button id="save-btn">Save</button>
    	<button id="del-btn">Delete</button>
        <button class="delete-btn">Delete Specific Skills</button>
    </div>
    <script>
    	const skillsEditContainer = document.querySelector("#skills-edit-container");
    	const redirectBtn = document.querySelector("#redirect-arrow-icon");
    	const skillsEditInput = document.querySelector("#edit-skills");
    	const saveBtn = document.querySelector("#save-btn");
    	const delBtn = document.querySelector("#del-btn");
        const deleteBtn = document.querySelector(".delete-btn");

    	saveBtn.addEventListener("click", () => {
            try {
            fetch("http://localhost:3000/edit-skills-section", {
                method: "put",
                headers: {"Content-Type" : "application/json"},
                body: JSON.stringify({id:"1", name: skillsEditInput.value})
            })
            .then(res => res.json())
            .then(data => {
                console.log(data);
            })
            .catch(err => {
                console.error("Error:", err);
            })
    		// window.location = "/";
            } catch (error) {
                console.error("Caught Error:", error)
            }
    	})
      
             // deleteBtn.setAttribute("id", 82);
        // fetch("http://localhost:3000/users")
        // .then(res => res.json())
        // .then(users => {
        //     users.forEach(user => {
        //         deleteBtn.setAttribute("id", user.id);
        //     })
        // })
        //      deleteBtn.addEventListener("click", (e) => {
        //          console.log(e.target)
                
        //      })

      fetch("http://localhost:3000/users")
      .then(res => res.json())
      .then((users, i) => {
    	delBtn.addEventListener("click", () => {
            users.forEach(user => {
             fetch(`http://localhost:3000/users`, {
                method: "delete",
                headers: {"Content-Type" : "application/json"},
                body: JSON.stringify({id: user.id})
             })
            })
    	})
      })


        redirectBtn.addEventListener("click", () => {
            window.location = "/";
        })

        
    </script>
</body>
</html>